<!-- MHonArc v2.6.16 -->
<!--X-Subject: [mhc:00512] Re: mhc&#45;cvs.el -->
<!--X-From-R13: Vvqrlhxv EVWDOW (=?vfb&#45;2022&#45;wc?P?UlDQD3WjLw0bAHCoYSW=?=) <fuvenvNeqzt.ztpf.zrv.pb.wc> -->
<!--X-Date: Thu, 20 Apr 2000 11:11:26 +0900 -->
<!--X-Message-Id: 20000420.111045.114700906.shirai@rdmg.mgcs.mei.co.jp -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20000419.184234.126688598.shirai@rdmg.mgcs.mei.co.jp -->
<!--X-Reference: wkg0si4631.fsf@miyoshi.ask.ne.jp -->
<!--X-Reference: 200004192257.HAA28786@crest.csce.kyushu&#45;u.ac.jp -->
<!--X-Reference: 20000420090428W.nom@csce.kyushu&#45;u.ac.jp -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[mhc:00512] Re: mhc-cvs.el</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00510.html">Date Prev</a>][<a href="msg00512.html">Date Next</a>][<a href="msg00509.html">Thread Prev</a>][<a href="msg00507.html">Thread Next</a>][<a href="maillist.html#00511">Date Index</a>][<a href="threads.html#00511">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[mhc:00512] Re: mhc-cvs.el</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:mhc@DOMAIN.HIDDEN">mhc@xxxxxxxxxxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: [mhc:00512] Re: mhc-cvs.el</li>
<li><em>From</em>: Hideyuki SHIRAI (&#x767D;&#x4E95;&#x79C0;&#x884C;) &lt;<a href="mailto:shirai@DOMAIN.HIDDEN">shirai@xxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Thu, 20 Apr 2000 11:11:26 +0900</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:20000420090428W.nom@DOMAIN.HIDDEN">20000420090428W.nom@xxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Organization</em>: Matsushita Graphic Communication Systems, Inc.</li>
<li><em>Posted</em>: Thu, 20 Apr 2000 11:10:45 +0900 (JST)</li>
<li><em>References</em>: &lt;<a href="mailto:20000419.184234.126688598.shirai@DOMAIN.HIDDEN">20000419.184234.126688598.shirai@xxxxxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:wkg0si4631.fsf@DOMAIN.HIDDEN">wkg0si4631.fsf@xxxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:200004192257.HAA28786@DOMAIN.HIDDEN">200004192257.HAA28786@xxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:20000420090428W.nom@DOMAIN.HIDDEN">20000420090428W.nom@xxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Reply-to</em>: <a href="mailto:mhc@DOMAIN.HIDDEN">mhc@xxxxxxxxxxxxxxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>From: Yoshinari NOMURA &lt;nom@xxxxxxxxxxxxxxxxxxx&gt; &#x3055;&#x3093;&#x66F0;&#x304F;
Subject: [mhc:00510] Re: mhc-cvs.el
Message-ID: &lt;20000420090428W.nom@xxxxxxxxxxxxxxxxxxx&gt;
Date: Thu, 20 Apr 2000 09:04:31 +0900

nom&gt; &#x304A;&#x306F;&#x3088;&#x3046;&#x3054;&#x3056;&#x3044;&#x307E;&#x3059;&#x3002;&#x3054;&#x3081;&#x3093;&#x306A;&#x3055;&#x3044;&#x3002;
nom&gt; &#x3082;&#x3046;&#x3061;&#x3087;&#x3063;&#x3068;&#x3057;&#x305F;&#x3089;&#x6226;&#x7DDA;&#x5FA9;&#x5E30;&#x3067;&#x304D;&#x308B;&#x3068;&#x601D;&#x3044;&#x307E;&#x3059;&#x3002;

&#x304A;&#x4ED5;&#x4E8B;&#x304C;&#x3093;&#x3070;&#x3063;&#x3066;&#x304F;&#x3060;&#x3055;&#x3044;&#x307E;&#x305B;&#x3002;

nom&gt; &gt; &#x4E09;&#x597D;&gt; &#x3057;&#x304B;&#x3057;&#x3001;&#x30BD;&#x30FC;&#x30B9;&#x3092;&#x6C5A;&#x3055;&#x306A;&#x3044;&#x307B;&#x3046;&#x304C;&#x826F;&#x3044;&#x3068;&#x601D;&#x3044;&#x307E;&#x3059;&#x3002;
nom&gt; &gt; &#x4E09;&#x597D;&gt; .emacs &#x306B;&#x6B21;&#x306E;&#x8A2D;&#x5B9A;&#x3092;&#x52A0;&#x3048;&#x308B;&#x3053;&#x3068;&#x3067;&#x56DE;&#x907F;&#x3067;&#x304D;&#x308B;&#x554F;&#x984C;&#x3067;&#x3059;&#x306E;&#x3067;&#x3002;

## &#x3053;&#x306E; argument-editing &#x306F;&#x521D;&#x8033;&#x3067;&#x3057;&#x305F;&#x3002;^^;;;

nom&gt; mhc &#x307E;&#x308B;&#x3054;&#x3068;&#x5168;&#x90E8; .emacs &#x306B;&#x66F8;&#x3051;&#x3070;&#x3001;&#x30BD;&#x30FC;&#x30B9;&#x306F;&#x4E00;&#x756A;&#x6C5A;&#x308C;&#x306A;&#x3044;&#x308F;&#x3051;&#x3060;&#x3057;&#x3002;^^;

&#x3068;&#x3063;&#x3066;&#x3082;&#x3059;&#x3066;&#x304D;&#x3067;&#x3059;&#x306D;&#x3001;&#x305D;&#x308C;&#x3063;&#x3066;&#x3002;

nom&gt; mhc &#x306E;&#x305F;&#x3081;&#x306B; .emacs &#x306B;&#x66F8;&#x3044;&#x3066;&#x3044;&#x308B;&#x3053;&#x3068;&#x304C;&#x3042;&#x308C;&#x3070;&#x3001;
nom&gt; &#x307F;&#x3093;&#x306A;&#x306E;&#x305F;&#x3081;&#x306B;&#x5410;&#x304D;&#x51FA;&#x3057;&#x3066;&#x4E0B;&#x3055;&#x3044; &gt; elisper &#x306A;&#x65B9;&#x3005; :-)

&#x50D5;&#x306E;&#x3060;&#x3068; Mew &#x9650;&#x5B9A;&#x306B;&#x306A;&#x3063;&#x3061;&#x3083;&#x3046;&#x306E;&#x3067;&#x3001;&#x3044;&#x307E;&#x3044;&#x3061;&#x306A;&#x306E;&#x3067;&#x3059;&#x304C;&#x3001;&#x3068;&#x308A;&#x3042;&#x3048;
&#x305A;&#x3053;&#x3046;&#x3044;&#x3046;&#x306E;&#x3084;&#x3063;&#x3066;&#x3044;&#x307E;&#x3059;&#x3088;&#x3001;&#x3068;&#x3044;&#x3046;&#x3053;&#x3068;&#x3067;&#x3002;

## &#x3042;&#x307E;&#x308A;&#x306B;&#x3081;&#x3061;&#x3083;&#x304F;&#x3061;&#x3083;&#x306A;&#x306E;&#x3067;&#x76EE;&#x304C;&#x6F70;&#x308C;&#x305F;&#x3089;&#x3054;&#x3081;&#x3093;&#x306A;&#x3055;&#x3044;&#x3002;

-- 
&#x767D;&#x4E95;&#x79C0;&#x884C; (<a  rel="nofollow" href="mailto:shirai@xxxxxxxxxxxxxxxxxxx">mailto:shirai@xxxxxxxxxxxxxxxxxxx</a>)

;; &#x3044;&#x3064;&#x3067;&#x3082;&#x3069;&#x3053;&#x3067;&#x3082; mhc
;; tool bar &#x3092;&#x3054;&#x307E;&#x304B;&#x3059; 19.28 &#x301C; 20.6 &#x3067;&#x306F;&#x5927;&#x4E08;&#x592B;&#x3002;
(if (not (and (boundp 'window-system)
	      window-system))
    ()
  (defvar menu-bar-file-menu nil)
  (defvar menu-bar-tools-menu nil)
  (cond
   (menu-bar-tools-menu
    (substitute-key-definition 'rmail 'mew menu-bar-tools-menu)
    (substitute-key-definition 'calendar 'mew-mhc menu-bar-tools-menu))
   (menu-bar-file-menu
    (substitute-key-definition 'rmail 'mew menu-bar-file-menu)
    (substitute-key-definition 'mail 'mew-send menu-bar-file-menu)
    (substitute-key-definition 'calendar 'mew-mhc menu-bar-file-menu))))

(defun mew-mhc ()
  (interactive)
  (if (and (eq mhc-mailer-package 'mew)
	   (not (or (and (boundp 'mew-init-p)
			 mew-init-p)
		    (and (boundp 'mew-mail-path)
			 mew-mail-path))))
      (progn
	(cd &quot;~/&quot;)
	(mew)
	(if (get-buffer mew-buffer-hello)
	    (kill-buffer mew-buffer-hello))))
  (mhc-goto-this-month))

(define-key global-map &quot;\C-c.&quot; 'mew-mhc)

;; &#x3053;&#x308C;&#x306F; default &#x3067;&#x5165;&#x308C;&#x3066;&#x3082;&#x3089;&#x3048;&#x308B;&#x3068;&#x3046;&#x308C;&#x3057;&#x3044;&#x3002;
(eval-after-load &quot;mhc&quot;
  '(setq mhc-draft-unuse-hdr-list
	 (append (list &quot;From &quot; &quot;&gt;From &quot;)
		 mhc-draft-unuse-hdr-list)))

(add-hook 'mhc-mode-hook
	  '(lambda ()
	     (and (featurep 'mew-nmz)
		  ;; &#x3053;&#x3053;&#x306F;&#x4E00;&#x822C;&#x7684;&#x3058;&#x3083;&#x306A;&#x3044;&#x3067;&#x3059;&#x306D;&#x3002;&#x5143;&#x306E; filename
		  ;; &#x304C;&#x308F;&#x304B;&#x308B;&#x306E;&#x3067;&#x4FBF;&#x5229;&#x306A;&#x306E;&#x3067;&#x3059;&#x3002;
		  (define-key mhc-mode-map &quot;zj&quot; 'mew-virtual-original-message))
	     (if (not (eq mhc-mailer-package 'mew))
		 ()
               ;; Mew &#x306E; message buffer &#x3092;&#x6D88;&#x3059;
	       (and (mew-buffer-message)
		    (get-buffer-window (mew-buffer-message))
		    (window-live-p (get-buffer-window (mew-buffer-message)))
		    (delete-window (get-buffer-window (mew-buffer-message))))
               ;; message &#x306E;&#x8868;&#x793A;&#x89E3;&#x9664;
	       (and mew-summary-buffer-disp-msg
		    (mew-summary-toggle-disp-msg)))))

;; &#x4E0A;&#x306E; hook &#x3067; message buffer &#x3092;&#x6D88;&#x3059;&#x3068;&#x3001;mhc &#x306E;&#x898B;&#x305F;&#x3081;&#x304C;&#x60AA;&#x3044;&#x3002;
(add-hook 'mhc-mode-hook
	  '(lambda ()
	     (let ((pos (point)))
	       (goto-char (point-min))
	       (sit-for 0)
	       (goto-char pos)))
	  t)

;; &#x5F8C;&#x85E4;&#x3055;&#x3093;&#x306E; mew-message-decode-header &#x3092;&#x6539;&#x9020;&#x3057;&#x3066;&#x3001;
;; mhc &#x3068;&#x601D;&#x308F;&#x308C;&#x308B;&#x3068;&#x304D;&#x3060;&#x3051; &quot;&#x751F;JIS&quot; &#x3092; decode &#x3059;&#x308B;
;; mhc-message-decode-header
(add-hook 'mew-message-hook 'mhc-message-decode-header)
(defun mhc-message-decode-header ()
  &quot;mhc-message-hook function to decode RAW JIS subject in header&quot;
  (condition-case e
      (if (mew-current-get 'cache)
	  (let* ((cache (mew-current-get 'cache))
		 (part (mew-current-get 'part))
		 (syntax (mew-cache-decode-syntax cache))
		 (ent (mew-syntax-get-entry syntax part))
		 (ct (mew-syntax-get-ct ent))
		 (buffer-read-only nil))
	    (if (not (equal &quot;Message/Rfc822&quot; (car ct)))
		()			; nothing to do
	      ;; do only Message/Rfc822 contents
	      (save-excursion
		(save-restriction
		  (widen)
		  (goto-char 1)
		  (if (not (re-search-forward &quot;\r?\n\r?\n&quot; nil t))
		      ()		; no header
		    (narrow-to-region (point-min) (point))
		    (goto-char (point-min))
		    (if (not (re-search-forward &quot;^X-SC-Subject:&quot; nil t))
			()
		      (goto-char (point-min))
		      ;; decode raw JIS string
		      (while (&lt; (point) (point-max))
			(if (looking-at &quot;[^:]+:? *&quot;)
			    (goto-char (match-end 0)))
			(if (and (not (looking-at &quot;[\t\x20-\x7e]+$&quot;))
				 (equal (mew-find-cs-region 
					 (point)
					 (save-excursion (end-of-line) (point)))
					(list mew-lc-ascii)))
			    ;; decode!
			    (mew-cs-decode-region (point) 
						  (save-excursion
						    (end-of-line)
						    (point))
						  mew-cs-scan))
			(beginning-of-line)
			(forward-line 1))
		      ;; re-highlight
		      (mew-highlight-header)
		      (save-excursion
			(mew-highlight-x-face (point-min) (point-max))))))))))
    (error
     (ding t)
     (message &quot;mhc-message-decode-header: %s&quot; (or (cdr e) &quot;some error!&quot;)))))
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00505" href="msg00505.html">[mhc:00506] Re: mhc-cvs.el</a></strong>
<ul><li><em>From:</em> &#x767D;&#x4E95;&#x79C0;&#x884C;</li></ul></li>
<li><strong><a name="00506" href="msg00506.html">[mhc:00507] Re: mhc-cvs.el</a></strong>
<ul><li><em>From:</em> MIYOSHI Masanori</li></ul></li>
<li><strong><a name="00508" href="msg00508.html">[mhc:00509] Re: mhc-cvs.el</a></strong>
<ul><li><em>From:</em> TSUCHIYA Masatoshi</li></ul></li>
<li><strong><a name="00509" href="msg00509.html">[mhc:00510] Re: mhc-cvs.el</a></strong>
<ul><li><em>From:</em> Yoshinari NOMURA</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00510.html">[mhc:00511] Re: mhc-cvs.el and Gnus support</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00512.html">[mhc:00513] Re: mhc-cvs.el and Gnus support</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00509.html">[mhc:00510] Re: mhc-cvs.el</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00507.html">[mhc:00508] mhc-cvs.el and Gnus support</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00511"><strong>Date</strong></a></li>
<li><a href="threads.html#00511"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

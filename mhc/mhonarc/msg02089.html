<!-- MHonArc v2.6.16 -->
<!--X-Subject: [mhc:02090] mhc.el patch (Re:  Re: X&#45;SC&#45;Next =?ISO&#45;2022&#45;JP?B?GyRCJVUlIyE8JWslSSROSn0/SyRLJEQkJCRGGyhC?=) -->
<!--X-From-R13: @AUGQVW Khfhxr <abthabthNzin.ovtybor.ar.wc> -->
<!--X-Date: Thu, 07 Apr 2005 15:14:26 +0900 (JST) -->
<!--X-Message-Id: 20050407.151426.82053102.nogunogu@mva.biglobe.ne.jp -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: 20050405184307S.nom@vintage.swlab.it.okayama&#45;u.ac.jp -->
<!--X-Reference: 20050406.192451.92605439.nogunogu@mva.biglobe.ne.jp -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[mhc:02090] mhc.el patch (Re:  Re: X-SC-Next &#x30D5;&#x30A3;&#x30FC;&#x30EB;&#x30C9;&#x306E;&#x65B9;&#x91DD;&#x306B;&#x3064;&#x3044;&#x3066;)</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg02088.html">Date Prev</a>][<a href="msg02090.html">Date Next</a>][<a href="msg02088.html">Thread Prev</a>][<a href="msg02090.html">Thread Next</a>][<a href="maillist.html#02089">Date Index</a>][<a href="threads.html#02089">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[mhc:02090] mhc.el patch (Re:  Re: X-SC-Next &#x30D5;&#x30A3;&#x30FC;&#x30EB;&#x30C9;&#x306E;&#x65B9;&#x91DD;&#x306B;&#x3064;&#x3044;&#x3066;)</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:mhc@DOMAIN.HIDDEN">mhc@xxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: [mhc:02090] mhc.el patch (Re:  Re: X-SC-Next &#x30D5;&#x30A3;&#x30FC;&#x30EB;&#x30C9;&#x306E;&#x65B9;&#x91DD;&#x306B;&#x3064;&#x3044;&#x3066;)</li>
<li><em>From</em>: NOGUCHI Yusuke &lt;<a href="mailto:nogunogu@DOMAIN.HIDDEN">nogunogu@xxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Thu, 07 Apr 2005 15:14:26 +0900 (JST)</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:20050406.192451.92605439.nogunogu@DOMAIN.HIDDEN">20050406.192451.92605439.nogunogu@xxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:20050405184307S.nom@DOMAIN.HIDDEN">20050405184307S.nom@xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:20050406.192451.92605439.nogunogu@DOMAIN.HIDDEN">20050406.192451.92605439.nogunogu@xxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Reply-to</em>: <a href="mailto:mhc@DOMAIN.HIDDEN">mhc@xxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>&#x91CE;&#x53E3;&#x3067;&#x3059;&#x3002;

# X-SC-Next: &#x304C;&#x4ECA;&#x5F8C;&#x3082;&#x3042;&#x308A;&#x3064;&#x3065;&#x3051;&#x308B;&#x306E;&#x304B;&#x3069;&#x3046;&#x304B;&#x308F;&#x304B;&#x3089;&#x306A;&#x3044;&#x306E;&#x3067;&#x3001;&#x63D0;&#x6848;&#x3059;&#x308B;&#x610F;
# &#x7FA9;&#x304C;&#x3042;&#x308B;&#x306E;&#x304B;&#x3069;&#x3046;&#x304B;&#x4E0D;&#x660E;&#x3067;&#x3059;&#x304C;...
# &#x79C1;&#x306B;&#x306F;*&#x4ECA;*&#x6B32;&#x3057;&#x3044;&#x6A5F;&#x80FD;&#x3060;&#x3063;&#x305F;&#x306E;&#x3067;

&gt; -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
&gt; &#x4F1A;&#x8B70;&#x540D;&#xFF1A;&#x30B0;&#x30EB;&#x30FC;&#x30D7;&#x5831;&#x544A;&#x4F1A;&#xFF20;123&#x4F1A;&#x8B70;&#x5BA4;
&gt; 4/14 13:00-14:00  &#x7530;&#x4E2D;&#x3055;&#x3093;&#x5831;&#x544A;
&gt; 5/20 10:00-12:00  &#x9234;&#x6728;&#x3055;&#x3093;&#x5831;&#x544A;
&gt; 6/18 10:00-12:00  &#x4E95;&#x4E0A;&#x3055;&#x3093;&#x5831;&#x544A;
&gt; 7/19 10:00-12:00  &#x7AF9;&#x4E0B;&#x3055;&#x3093;&#x5831;&#x544A;
&gt; -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-

&#x79C1;&#x306E;&#x5468;&#x56F2;&#x3067;&#x306F;&#x3001;&#x4E0A;&#x8A18;&#x66F8;&#x5F0F;&#x306E;&#x30B9;&#x30B1;&#x30B8;&#x30E5;&#x30FC;&#x30EB;&#x304C;&#x56DE;&#x308B;&#x3053;&#x3068;&#x304C;&#x5EA6;&#x3005;&#x3042;&#x308A;&#x3001;&#x73FE;&#x72B6; C-c . |
&#x3067;&#x767B;&#x9332;&#x3059;&#x308B;&#x969B;&#x306B;&#x306F;&#x3001; &#x300C;X-SC-Next &#x3092;&#x4F7F;&#x3063;&#x3066;&#x306E;&#x540C;&#x4E00;&#x767B;&#x9332;&#x3067;&#x8907;&#x6570;[location,
date, time] &#x306E;&#x767B;&#x9332;&#x300D;&#x304C;&#x3067;&#x304D;&#x306A;&#x3055;&#x305D;&#x3046;(draft&#x30D0;&#x30C3;&#x30D5;&#x30A1;&#x5185;&#x3067;&#x5F8C;&#x304B;&#x3089;&#x8FFD;&#x8A18;&#x3059;&#x308B;&#x3057;&#x304B;
&#x306A;&#x3044;?)&#x3060;&#x3063;&#x305F;&#x306E;&#x3067;&#x3001;mhc-edit() &#x306B;&#x6DFB;&#x4ED8;&#x306E;&#x3088;&#x3046;&#x306A;&#x624B;&#x3092;&#x52A0;&#x3048;&#x307E;&#x3057;&#x305F;&#x3002;


(setq mhc-do-register-xsc-next t)&#x3000;&#x3068;&#x3057;&#x3066;&#x304A;&#x304F;&#x3068;
&quot;C-c . |&quot; &#x3084; &quot;C-c . e&quot; &#x306E;&#x969B;&#x306B;&#x3001;&#x5FC5;&#x8981;&#x5206;&#x306E;(location, date, time)&#x3092;&#x767B;&#x9332;&#x3067;
&#x304D;&#x307E;&#x3059;&#x3002;

mhc-do-register-xsc-next &#x306E;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x5024;&#x306F; nil &#x3067;&#x3001;t &#x306B;&#x8A2D;&#x5B9A;&#x3057;&#x306A;&#x3044;&#x9650;&#x308A;
&#x4ECA;&#x307E;&#x3067;&#x901A;&#x308A;&#x306E;&#x6319;&#x52D5;&#x3092;&#x3059;&#x308B;&#x3088;&#x3046;&#x306B;&#x3057;&#x3066;&#x3044;&#x308B;&#x3064;&#x3082;&#x308A;&#x3067;&#x3059;&#x3002;


&#x4E0D;&#x8981;&#x306A;&#x3082;&#x306E;&#x304B;&#x3082;&#x3057;&#x308C;&#x307E;&#x305B;&#x3093;&#x304C;&#x3001;&#x305B;&#x3063;&#x304B;&#x304F;&#x4F5C;&#x3063;&#x305F;&#x306E;&#x3067;&#x63D0;&#x6848;&#x3044;&#x305F;&#x3057;&#x307E;&#x3059;&#x3002;
&#x5FA1;&#x691C;&#x8A0E;&#x3044;&#x305F;&#x3060;&#x3051;&#x308C;&#x3070;&#x5E78;&#x3044;&#x3067;&#x3059;&#x3002;
-- 
NOGUCHI Yusuke &lt;nogunogu@xxxxxxxxxxxxxxxxx&gt;
</pre><pre>*** mhc.el.org1	Mon Feb 14 14:23:10 2005
--- mhc.el	Thu Apr  7 14:51:33 2005
***************
*** 561,566 ****
--- 561,571 ----
  			 (const :tag &quot;Category&quot; category)
  			 (const :tag &quot;Alarm&quot; alarm))))
  
+ (defcustom mhc-do-register-xsc-next nil
+   &quot;&quot;
+   :group 'mhc
+   :type 'boolean)
+ 
  (defun mhc-edit (&amp;optional import-buffer)
    &quot;Edit a new schedule.
  If optional argument IMPORT-BUFFER is specified, import its content.
***************
*** 572,578 ****
    (let ((draft-buffer (generate-new-buffer mhc-draft-buffer-name))
  	(current-date (or (mhc-current-date) (mhc-calendar-get-date)))
  	(succeed t)
! 	msgp date time subject location category priority alarm)
      (and (interactive-p)
  	 (mhc-window-push))
      (set-buffer draft-buffer)
--- 577,584 ----
    (let ((draft-buffer (generate-new-buffer mhc-draft-buffer-name))
  	(current-date (or (mhc-current-date) (mhc-calendar-get-date)))
  	(succeed t)
! 	msgp date time subject location category priority alarm
! 	(next-entry-list ()))
      (and (interactive-p)
  	 (mhc-window-push))
      (set-buffer draft-buffer)
***************
*** 652,657 ****
--- 658,682 ----
  				  (mhc-input-alarm
  				   &quot;Alarm: &quot;
  				   mhc-default-alarm))))))
+ 		    (if mhc-do-register-xsc-next
+ 			(while (y-or-n-p 
+ 				&quot;More Schedule (date,time,location)? &quot;)
+ 			  (let (date-tmp time-tmp loc-tmp)
+ 			    (setq date-tmp
+ 				  (mhc-input-day &quot;Date: &quot;
+ 						 current-date
+ 						 (mhc-guess-date)))
+ 			    (setq time-tmp
+ 				  (mhc-input-time &quot;Time: &quot;
+ 						  (mhc-schedule-time-as-string
+ 						   schedule)
+ 						  (mhc-guess-time
+ 						   (mhc-minibuf-candidate-nth-begin))))
+ 			    (setq loc-tmp
+ 				 (mhc-input-location &quot;Location: &quot;
+ 				  (mhc-schedule-location schedule)))
+ 			    (setq next-entry-list 
+ 				  (cons (list date-tmp time-tmp loc-tmp) next-entry-list)))))
  		    ;;
  		    (setq priority (mhc-schedule-priority schedule)))
  		;; Answer was no.
***************
*** 678,684 ****
  		(setq category (mhc-input-category &quot;Category: &quot;)))
  	       ((eq input 'alarm)
  		(if mhc-ask-alarm
! 		    (setq alarm (mhc-input-alarm &quot;Alarm: &quot; mhc-default-alarm))))))))
        ;; Quit.
        (quit
         (and (interactive-p)
--- 703,718 ----
  		(setq category (mhc-input-category &quot;Category: &quot;)))
  	       ((eq input 'alarm)
  		(if mhc-ask-alarm
! 		    (setq alarm (mhc-input-alarm &quot;Alarm: &quot; mhc-default-alarm))))))
! 	    (if mhc-do-register-xsc-next
! 		(while (y-or-n-p &quot;More Schedule (date,time,location)? &quot;)
! 		  (let (date-tmp time-tmp loc-tmp)
! 		    (progn 
! 		      (setq date-tmp (mhc-input-day &quot;Date: &quot; current-date))
! 		      (setq time-tmp (mhc-input-time &quot;Time: &quot;))
! 		      (setq loc-tmp (mhc-input-location &quot;Location: &quot;))
! 		      (setq next-entry-list (cons (list date-tmp time-tmp loc-tmp) next-entry-list))))))
! 	    ))
        ;; Quit.
        (quit
         (and (interactive-p)
***************
*** 723,728 ****
--- 757,789 ----
  			 (if begin (mhc-time-to-string begin) &quot;&quot;)
  			 (if end (concat &quot;-&quot; (mhc-time-to-string end)) &quot;&quot;)))
  		    &quot;&quot;)
+ 		  )
+ 	  (if next-entry-list
+ 	      (let (date time location)
+ 		(while next-entry-list
+ 		  (setq date (car (car next-entry-list)))
+ 		  (setq time (car (cdr (car next-entry-list))))
+ 		  (setq location (car (cdr (cdr (car next-entry-list)))))
+ 		  (insert 
+ 		   &quot;\nX-SC-Next: &quot;
+ 		   &quot;\nX-SC-Location: &quot; location
+ 		   &quot;\nX-SC-Day: &quot;
+ 		   (mapconcat
+ 		    (lambda (day)
+ 		      (mhc-date-format day &quot;%04d%02d%02d&quot; yy mm dd))
+ 		    date &quot; &quot;)
+ 		   &quot;\nX-SC-Time: &quot;
+ 		   (if time
+ 		       (let ((begin (car time))
+ 			     (end (nth 1 time)))
+ 			 (concat
+ 			  (if begin (mhc-time-to-string begin) &quot;&quot;)
+ 			  (if end (concat &quot;-&quot; (mhc-time-to-string end)) &quot;&quot;)))
+ 		     &quot;&quot;)
+ 		   )
+ 		  (setq next-entry-list (cdr next-entry-list)))
+ 	      ))
+ 	  (insert
  		  &quot;\nX-SC-Category: &quot;
  		  (mapconcat (function capitalize) category &quot; &quot;)
  		  &quot;\nX-SC-Priority: &quot; (if priority
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="02087" href="msg02087.html">[mhc:02088] Re: X-SC-Next &#x30D5;&#x30A3;&#x30FC;&#x30EB;&#x30C9;&#x306E;&#x65B9;&#x91DD;&#x306B;&#x3064;&#x3044;&#x3066;</a></strong>
<ul><li><em>From:</em> Yoshinari Nomura</li></ul></li>
<li><strong><a name="02088" href="msg02088.html">[mhc:02089] Re: X-SC-Next &#x30D5;&#x30A3;&#x30FC;&#x30EB;&#x30C9;&#x306E;&#x65B9;&#x91DD;&#x306B;&#x3064;&#x3044;&#x3066;</a></strong>
<ul><li><em>From:</em> NOGUCHI Yusuke</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg02088.html">[mhc:02089] Re: X-SC-Next &#x30D5;&#x30A3;&#x30FC;&#x30EB;&#x30C9;&#x306E;&#x65B9;&#x91DD;&#x306B;&#x3064;&#x3044;&#x3066;</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg02090.html">[mhc:02091] patch for X-SC-Priority</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg02088.html">[mhc:02089] Re: X-SC-Next &#x30D5;&#x30A3;&#x30FC;&#x30EB;&#x30C9;&#x306E;&#x65B9;&#x91DD;&#x306B;&#x3064;&#x3044;&#x3066;</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg02090.html">[mhc:02091] patch for X-SC-Priority</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#02089"><strong>Date</strong></a></li>
<li><a href="threads.html#02089"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

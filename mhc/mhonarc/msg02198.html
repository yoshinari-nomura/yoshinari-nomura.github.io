<!-- MHonArc v2.6.16 -->
<!--X-Subject: [mhc:02199] Re: =?ISO&#45;2022&#45;JP?B?bWhjGyRCJE4bKEI=?=	=?ISO&#45;2022&#45;JP?B?VG9kbxskQiUrJUYlNCVqJEskRCQkJEYbKEI=?= -->
<!--X-From-R13: Vvqrlhxv EVWDOW (=?vfb&#45;2022&#45;wc?P?UlDQD3WjLw0bAHCoYSW=?=) <fuvenvNdhvpxunpx.arg> -->
<!--X-Date: Tue, 25 Apr 2006 12:31:51 +0900 (JST) -->
<!--X-Message-Id: 20060425.123151.194262963.shirai.hideyuki@rdmg.mgcs.mei.co.jp -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 532A34B6&#45;51A4&#45;43D8&#45;B745&#45;2ADBADA955B1@riken.jp -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[mhc:02199] Re: mhc&#x306E;Todo&#x30AB;&#x30C6;&#x30B4;&#x30EA;&#x306B;&#x3064;&#x3044;&#x3066;</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg02197.html">Date Prev</a>][<a href="msg02199.html">Date Next</a>][<a href="msg02197.html">Thread Prev</a>][<a href="msg02199.html">Thread Next</a>][<a href="maillist.html#02198">Date Index</a>][<a href="threads.html#02198">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[mhc:02199] Re: mhc&#x306E;Todo&#x30AB;&#x30C6;&#x30B4;&#x30EA;&#x306B;&#x3064;&#x3044;&#x3066;</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:mhc@DOMAIN.HIDDEN">mhc@xxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: [mhc:02199] Re: mhc&#x306E;Todo&#x30AB;&#x30C6;&#x30B4;&#x30EA;&#x306B;&#x3064;&#x3044;&#x3066;</li>
<li><em>From</em>: Hideyuki SHIRAI (&#x767D;&#x4E95;&#x79C0;&#x884C;) &lt;<a href="mailto:shirai@DOMAIN.HIDDEN">shirai@xxxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Tue, 25 Apr 2006 12:31:51 +0900 (JST)</li>
<li><em>Delivered-to</em>: <a href="mailto:mhc@DOMAIN.HIDDEN">mhc@xxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:532A34B6-51A4-43D8-B745-2ADBADA955B1@DOMAIN.HIDDEN">532A34B6-51A4-43D8-B745-2ADBADA955B1@xxxxxxxx</a>&gt;</li>
<li><em>List-help</em>: &lt;<a href="mailto:mhc-ctl@quickhack.net?body=help">mailto:mhc-ctl@quickhack.net?body=help</a>&gt;</li>
<li><em>List-id</em>: mhc.quickhack.net</li>
<li><em>List-owner</em>: &lt;<a href="mailto:mhc-admin@quickhack.net">mailto:mhc-admin@quickhack.net</a>&gt;</li>
<li><em>List-post</em>: &lt;<a href="mailto:mhc@quickhack.net">mailto:mhc@quickhack.net</a>&gt;</li>
<li><em>List-software</em>: fml [fml 4.0.3 release (20011202/4.0.3)]</li>
<li><em>List-unsubscribe</em>: &lt;<a href="mailto:mhc-ctl@quickhack.net?body=unsubscribe">mailto:mhc-ctl@quickhack.net?body=unsubscribe</a>&gt;</li>
<li><em>Organization</em>: QuickHackers, Tokyo, JAPAN</li>
<li><em>References</em>: &lt;<a href="mailto:532A34B6-51A4-43D8-B745-2ADBADA955B1@DOMAIN.HIDDEN">532A34B6-51A4-43D8-B745-2ADBADA955B1@xxxxxxxx</a>&gt;</li>
<li><em>Reply-to</em>: <a href="mailto:mhc@DOMAIN.HIDDEN">mhc@xxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre># &#x30EA;&#x30CF;&#x30D3;&#x30EA;&#x3001;&#x30EA;&#x30CF;&#x30D3;&#x30EA;&#x3002;

From: Takuo Tanaka &lt;t-tanaka@xxxxxxxx&gt; &#x3055;&#x3093;&#x66F0;&#x304F;
Subject: [mhc:02198] mhc&#x306E;Todo&#x30AB;&#x30C6;&#x30B4;&#x30EA;&#x306B;&#x3064;&#x3044;&#x3066;
Message-ID: &lt;532A34B6-51A4-43D8-B745-2ADBADA955B1@xxxxxxxx&gt;
Date: Mon, 24 Apr 2006 23:46:32 +0900

&gt; &#x30AB;&#x30C6;&#x30B4;&#x30EA;&#x306B;&#xFF0C;&quot;Todo&quot;&#x3068;&#x66F8;&#x304F;&#x3068;&#xFF0C;&#x30B9;&#x30B1;&#x30B8;&#x30E5;&#x30FC;&#x30EB;&#x8868;&#x306E;&#x4E0B;&#x306B;&#x9805;&#x76EE;&#x4E00;&#x89A7;&#x304C; 
&gt; &#x4F5C;&#x6210;&#x3055;&#x308C;&#x3066;&#xFF0C;&#x3084;&#x308B;&#x3079;&#x304D;&#x9805;&#x76EE;&#x304C;&#x5217;&#x6319;&#x3055;&#x308C;&#x307E;&#x3059;&#xFF0E;
&gt; &#x4ECA;&#x65E5;&#x73FE;&#x5728;&#x3088;&#x308A;&#x904E;&#x53BB;&#x306E;&quot;Todo&quot;&#x9805;&#x76EE;&#x306B;&#x306F;&#xFF0C;&quot;XX days  
&gt; overdue&quot;&#x3068;&#x8868;&#x793A;&#x3055;&#x308C;&#x307E;&#x3059;&#x304C;&#xFF0C;&#x3053;&#x308C;&#x3068;&#x540C;&#x6642;&#x306B;&#xFF0C;&#x904E;&#x53BB;&#x306E;&quot;Todo&quot;&#x9805;&#x76EE;&#x5168; 
&gt; &#x3066;&#x3092;&#x81EA;&#x52D5;&#x7684;&#x306B;&#x672C;&#x65E5;&#x306E;&#x4E88;&#x5B9A;&#x306B;&#x65E5;&#x4ED8;&#x3092;&#x30B7;&#x30D5;&#x30C8;&#x3055;&#x305B;&#x3066;&#x8868;&#x793A;&#x3055;&#x305B;&#x308B;&#x3053;&#x3068;&#x306F;&#x3067;&#x304D;&#x306A; 
&gt; &#x3044;&#x3067;&#x3057;&#x3087;&#x3046;&#x304B;&#xFF1F;

&#x306A;&#x308B;&#x307B;&#x3069;&#x3002;&#x3053;&#x3093;&#x306A;&#x611F;&#x3058;&#x306B;&#x306A;&#x308C;&#x3070;&#x3088;&#x3044;&#x306E;&#x3067;&#x3057;&#x3087;&#x3046;&#x304B;&#xFF1F;

&#x8868;&#x793A;&#x30D5;&#x30A9;&#x30FC;&#x30DE;&#x30C3;&#x30C8;&#x306F;&#x8ABF;&#x6574;&#x304C;&#x5FC5;&#x8981;(&#x3068;&#x3044;&#x3046;&#x304B;&#x65B0;&#x305F;&#x306B;&#x4F5C;&#x3089;&#x306A;&#x3044;&#x3068;&#x307F;&#x3063;&#x3068;&#x3082;&#x306A;
&#x3044;)&#x3001;&#x3068;&#x304B;&#x3001;&#x307E;&#x3060;&#x307E;&#x3060;&#x672A;&#x5B8C;&#x6210;&#x3067;&#x3059;&#x304C;&#x3001;&#x611F;&#x60F3;&#x3092;&#x304A;&#x805E;&#x304B;&#x305B;&#x4E0B;&#x3055;&#x3044;&#x3002;

## MHC &#x306F;&#x30EA;&#x30CF;&#x30D3;&#x30EA;&#x306B;&#x306F;&#x96E3;&#x3057;&#x3044; :-p

-- 
&#x767D;&#x4E95;&#x79C0;&#x884C; (<a  rel="nofollow" href="mailto:shirai@xxxxxxxxxxxxx">mailto:shirai@xxxxxxxxxxxxx</a>)



--- mhc-summary.el	07 Oct 2004 18:56:11 +0900	1.53
+++ mhc-summary.el	25 Apr 2006 12:29:41 +0900	
@@ -249,6 +249,11 @@
   :group 'mhc
   :type 'boolean)
 
+(defcustom mhc-insert-overdue-todo t
+  &quot;*Display overdue TODO on TODAY.&quot;
+  :group 'mhc
+  :type 'boolean)
+
 (defcustom mhc-memo-line-format &quot;   %p %i%s %l&quot;
   &quot;*A format string for summary memo line of MHC.
 It may include any of the following format specifications
@@ -636,13 +641,35 @@
 
 (defun mhc-summary-make-contents
   (from to mailer &amp;optional category-predicate secret)
-  (let ((dayinfo-list (mhc-db-scan from to)))
+  (let ((dayinfo-list (mhc-db-scan from to))
+	todo-list overdue deadline mhc-tmp-day)
     (setq mhc-summary/today (mhc-date-now))
     (while dayinfo-list
       (mhc-summary/insert-dayinfo
        (car dayinfo-list) mailer
        (or category-predicate mhc-default-category-predicate-sexp)
        secret)
+      (when (and mhc-insert-overdue-todo
+		 (mhc-date= (mhc-day-date (car dayinfo-list)) mhc-summary/today))
+	(setq todo-list (mhc-db-scan-todo mhc-summary/today))
+	(while todo-list
+	  (setq deadline (mhc-schedule-todo-deadline (car todo-list)))
+	  (when (and deadline
+		     (&gt; (mhc-date- mhc-summary/today deadline) 0)
+		     (not (mhc-schedule-in-category-p (car todo-list) &quot;done&quot;)))
+	    (setq overdue (cons (car todo-list) overdue)))
+	  (setq todo-list (cdr todo-list)))
+	(setq mhc-tmp-day mhc-summary/today)
+	(setq overdue (nreverse overdue))
+	(while overdue
+	  (mhc-summary-insert-contents
+	   (car overdue)
+	   (and secret
+		(mhc-schedule-in-category-p (car overdue)
+					    mhc-category-as-private))
+	   'mhc-todo-line-insert
+	   mailer)
+	  (setq overdue (cdr overdue))))
       (and mhc-use-week-separator
 	   (eq (mhc-day-day-of-week (car dayinfo-list))
 	       (mhc-end-day-of-week))



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="02199" href="msg02199.html">[mhc:02200] Re: mhc&#x306E;Todo&#x30AB;&#x30C6;&#x30B4;&#x30EA;&#x306B;&#x3064;&#x3044;&#x3066;</a></strong>
<ul><li><em>From:</em> &#x767D;&#x4E95;&#x79C0;&#x884C;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="02197" href="msg02197.html">[mhc:02198] mhc&#x306E;Todo&#x30AB;&#x30C6;&#x30B4;&#x30EA;&#x306B;&#x3064;&#x3044;&#x3066;</a></strong>
<ul><li><em>From:</em> Takuo Tanaka</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg02197.html">[mhc:02198] mhc&#x306E;Todo&#x30AB;&#x30C6;&#x30B4;&#x30EA;&#x306B;&#x3064;&#x3044;&#x3066;</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg02199.html">[mhc:02200] Re: mhc&#x306E;Todo&#x30AB;&#x30C6;&#x30B4;&#x30EA;&#x306B;&#x3064;&#x3044;&#x3066;</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg02197.html">[mhc:02198] mhc&#x306E;Todo&#x30AB;&#x30C6;&#x30B4;&#x30EA;&#x306B;&#x3064;&#x3044;&#x3066;</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg02199.html">[mhc:02200] Re: mhc&#x306E;Todo&#x30AB;&#x30C6;&#x30B4;&#x30EA;&#x306B;&#x3064;&#x3044;&#x3066;</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#02198"><strong>Date</strong></a></li>
<li><a href="threads.html#02198"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

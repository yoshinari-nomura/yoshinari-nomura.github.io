<!-- MHonArc v2.6.16 -->
<!--X-Subject: [mhc:00238] Re: signal delete_event on Mhc::DayBook -->
<!--X-From-R13: Knfhfuv Eubwv <lnfuvNlnfuv.pbz> -->
<!--X-Date: Sun, 28 Nov 1999 23:50:14 +0900 -->
<!--X-Message-Id: 19991128094954X.yashi@yashi.com -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: 19991125193601T.nom@csce.kyushu&#45;u.ac.jp -->
<!--X-Reference: 19991125172903Z.yashi@yashi.com -->
<!--X-Reference: 19991126142318U.nom@csce.kyushu&#45;u.ac.jp -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[mhc:00238] Re: signal delete_event on Mhc::DayBook</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00236.html">Date Prev</a>][<a href="msg00238.html">Date Next</a>][<a href="msg00236.html">Thread Prev</a>][<a href="msg00234.html">Thread Next</a>][<a href="maillist.html#00237">Date Index</a>][<a href="threads.html#00237">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[mhc:00238] Re: signal delete_event on Mhc::DayBook</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:nom@DOMAIN.HIDDEN">nom@xxxxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: [mhc:00238] Re: signal delete_event on Mhc::DayBook</li>
<li><em>From</em>: Yasushi Shoji &lt;<a href="mailto:yashi@DOMAIN.HIDDEN">yashi@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Sun, 28 Nov 1999 23:50:14 +0900</li>
<li><em>Cc</em>: <a href="mailto:mhc@DOMAIN.HIDDEN">mhc@xxxxxxxxxxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:19991126142318U.nom@DOMAIN.HIDDEN">19991126142318U.nom@xxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Posted</em>: Sun, 28 Nov 1999 09:49:54 -0500</li>
<li><em>References</em>: &lt;<a href="mailto:19991125193601T.nom@DOMAIN.HIDDEN">19991125193601T.nom@xxxxxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:19991125172903Z.yashi@DOMAIN.HIDDEN">19991125172903Z.yashi@xxxxxxxxx</a>&gt;	&lt;<a href="mailto:19991126142318U.nom@DOMAIN.HIDDEN">19991126142318U.nom@xxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Reply-to</em>: <a href="mailto:mhc@DOMAIN.HIDDEN">mhc@xxxxxxxxxxxxxxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>From: Yoshinari NOMURA &lt;nom@xxxxxxxxxxxxxxxxxxx&gt;
Subject: Re: [mhc:00236] Re: signal delete_event on Mhc::DayBook
Date: Fri, 26 Nov 1999 14:23:18 +0900

&gt; ruby-ext &#x306B;&#x6301;&#x3063;&#x3066;&#x884C;&#x3063;&#x305F;&#x65B9;&#x304C;&#x3044;&#x3044;&#x304B;&#x306A;&#x3002;

&#x304B;&#x3082;&#x3001;&#x3057;&#x308C;&#x307E;&#x305B;&#x3093;&#x306D;&#x3002;&#x50D5;&#x306F; ruby-ext&#x3082;&#x8AAD;&#x3093;&#x3067;&#x3044;&#x308B;&#x306E;&#x3067;&#x3001;&#x306D;&#x305F;&#x3075;&#x308A;&#x304A;&#x306D;&#x304C;&#x3044;&#x3057;&#x307E;
&#x3059;(^^;

&gt; On Fri, 26 Nov 1999 07:29:21 +0900,
&gt; 	Yasushi Shoji &lt;yashi@xxxxxxxxx&gt; said:
&gt; 
&gt; &gt; Ruby/Gtk 0.22&#x3067;&#x306F;&#x3001;signal&#x3092; emit&#x3059;&#x308B; method&#x3059;&#x3089;&#x7121;&#x3044;&#x3067;&#x3059;&#x306D;(^^;
&gt; 
&gt; &#x305D;&#x3046;&#x306A;&#x3093;&#x3067;&#x3059;&#x3088;&#x3002;gemcal &#x3067;&#x306F;&#x3001;signal &#x540D; -&gt; proc &#x306E;&#x30CF;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x81EA;&#x5206;
&gt; &#x3067;&#x6301;&#x3063;&#x3066;&#x3001;&#x3080;&#x308A;&#x3084;&#x308A; emit &#x52D5;&#x4F5C;&#x3092;&#x3055;&#x305B;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;

signal_emit&#x306F;&#x4F5C;&#x3063;&#x305F;&#x3093;&#x3067;&#x3059;&#x3051;&#x3069;&#x3001;class&#x306B;&#x65B0;&#x3057;&#x3044; signal&#x3092;&#x4ED8;&#x3051;&#x308B;&#x306E;&#x304C;&#x96E3;&#x3057;&#x305D;&#x3046;
&#x306A;&#x3093;&#x3067;&#x3059;&#x3088;&#x2025;&#x2025;&#x3002;Gtk&#x306E;&#x5185;&#x90E8;&#x3068;&#x304B;&#x826F;&#x304F;&#x308F;&#x304B;&#x3063;&#x3066;&#x306A;&#x3044;&#x3082;&#x306E;&#x3067;(&#x6C57;

[...]

&gt; &#x3068;&#x66F8;&#x304D;&#x305F;&#x3044;&#x306E;&#x3067;&#x3059;&#x3002;&#x4ECA;&#x306F; container &#x306E; signal_connect &#x3092;&#x518D;&#x5B9A;&#x7FA9;&#x3057;&#x3066;&#x3001;
&gt; &#x305D;&#x3053;&#x3067;&#x5834;&#x5408;&#x5206;&#x3051;&#x3092;&#x3057;&#x3066;&#x3044;&#x307E;&#x3059;&#x304C;&#x3001;&#x5B9F;&#x306F;&#x3082;&#x3063;&#x3068;&#x3046;&#x307E;&#x3044;&#x65B9;&#x6CD5;&#x304C;&#x3042;&#x308B;&#x3093;&#x3067;&#x306F;&#x306A;
&gt; &#x3044;&#x304B;? &#x3068;&#x601D;&#x3063;&#x305F;&#x308A;&#x3057;&#x3066;&#x3044;&#x308B;&#x308F;&#x3051;&#x3067;&#x3059;&#x3002;

&#x3046;&#x301C;&#x3093;&#x3001;C &#x3068; Ruby&#x3067;&#x3057;&#x304B; Gtk&#x3092;&#x4F7F;&#x3063;&#x305F;&#x3053;&#x3068;&#x304C;&#x306A;&#x3044;&#x306E;&#x3067;&#x308F;&#x304B;&#x3089;&#x306A;&#x3044;&#x3067;&#x3059;&#x3002;
KDE&#x306E; Qt&#x3068;&#x304B;&#x3063;&#x3066;&#x305D;&#x3046;&#x3044;&#x3046;&#x4E8B;&#x304C;&#x3067;&#x304D;&#x305F;&#x308A;&#x3059;&#x308B;&#x306E;&#x3067;&#x3057;&#x3087;&#x3046;&#x304B;?

Gtk+&#x306E; GGAD(&#x304B;&#x306A;?)&#x306B;&#x306F;&#x3001;signal_emit&#x3059;&#x308B;&#x306E;&#x306F;&#x81EA;&#x5206;&#x81EA;&#x8EAB;&#x306B;&#x95A2;&#x3059;&#x308B; signal&#x3060;&#x3051;&#x306B;
&#x3057;&#x3066;&#x304A;&#x304B;&#x306A;&#x3044;&#x3068;&#x4E0A;&#x624B;&#x304F;&#x52D5;&#x304B;&#x306A;&#x3044;&#x304B;&#x3082;&#x3057;&#x308C;&#x306A;&#x3044;(&#x4FDD;&#x8A3C;&#x3055;&#x308C;&#x3066;&#x306A;&#x3044;)&#x3063;&#x3066;&#x66F8;&#x3044;&#x3066;&#x3042;&#x3063;&#x305F;
&#x69D8;&#x306A;&#x6C17;&#x304C;&#x3057;&#x307E;&#x3059;&#x3002;

&gt;  calendar .day[31] .signal_connect('clicked'){|w| w .open(31)}
&gt; 
&gt; &#x3068;&#x66F8;&#x304B;&#x305A;&#x306B;&#x3001;Gtk::CList &#x306E;&#x3088;&#x3046;&#x306B;
&gt; 
&gt;  calendar .signal_connect('day-button-clicked'){|w,d| w .open(d)}

&#x3053;&#x308C;&#x3092;&#x898B;&#x3066;&#x3001;GtkCalendar&#x306B;&#x5BFE;&#x5FDC;&#x3057;&#x3066;&#x306A;&#x3044;&#x306E;&#x3092;&#x77E5;&#x3063;&#x305F;&#x306E;&#x3067;&#x3001;&#x4F5C;&#x308A;&#x307E;&#x3057;&#x305F;(^^;
mail&#x306B;&#x4ED8;&#x3051;&#x3066;&#x304A;&#x304D;&#x307E;&#x3059;&#x306D;&#x3002;patch&#x3058;&#x3083;&#x306A;&#x304F;&#x3066; file&#x306A;&#x306E;&#x3067; extconf.rb&#x3068;&#x304B;&#x3092;&#x3044;&#x3062;
&#x3089;&#x306A;&#x3044;&#x3068;&#x3001;compile&#x3055;&#x308C;&#x307E;&#x305B;&#x3093;&#x3002;&#x6C17;&#x3092;&#x4ED8;&#x3051;&#x3066;&#x304F;&#x3060;&#x3055;&#x3044;&#x3002;

cal = Gtk::Calendar.new
cal.signal_connect('day_selected') do
  year, month, day = cal.date
  hoge.open(day)
end

&#x304B;&#x306A;&#x3041;&#x301C;&#x3002;&#x307E;&#x3060;&#x3001;&#x3060;&#x3081;&#x3067;&#x3059;&#x306D;&#x2025;&#x2025;&#x3002;
--
              yahsi
</pre><pre>#include &quot;global.h&quot;

static VALUE
cal_init(self)
    VALUE self;
{
    set_widget(self, gtk_calendar_new());
    return Qnil;
}

static VALUE
cal_select_month(self, month, year)
    VALUE self, month, year;
{
    gint ret;

    ret = gtk_calendar_select_month(GTK_CALENDAR(get_widget(self)),
				    FIX2INT(month),
				    FIX2INT(year));
    return INT2FIX(ret);
}

static VALUE
cal_select_day(self, day)
    VALUE self, day;
{
    gtk_calendar_select_day(GTK_CALENDAR(get_widget(self)), FIX2INT(day));
    return self;
}

static VALUE
cal_mark_day(self, day)
    VALUE self, day;
{
    gint ret;

    ret = gtk_calendar_mark_day(GTK_CALENDAR(get_widget(self)), FIX2INT(day));
    return INT2FIX(ret);
}

static VALUE
cal_unmark_day(self, day)
    VALUE self, day;
{
    gint ret;

    ret = gtk_calendar_unmark_day(GTK_CALENDAR(get_widget(self)), FIX2INT(day));
    return INT2FIX(ret);
}

static VALUE
cal_clear_marks(self)
    VALUE self;
{
    gtk_calendar_clear_marks(GTK_CALENDAR(get_widget(self)));
    return self;
}

static VALUE
cal_display_options(self, flags)
    VALUE self, flags;
{
    gtk_calendar_display_options(GTK_CALENDAR(get_widget(self)),
				 FIX2INT(flags));
    return self;
}

static VALUE
cal_get_date(self)
    VALUE self;
{
    VALUE ret;
    guint year, month, day;

    gtk_calendar_get_date(GTK_CALENDAR(get_widget(self)),
			  &amp;year, &amp;month, &amp;day);
    ret = rb_ary_new();
    rb_ary_push(ret, INT2FIX(year));
    rb_ary_push(ret, INT2FIX(month));
    rb_ary_push(ret, INT2FIX(day));
    return ret;
}

static VALUE
cal_freeze(self)
    VALUE self;
{
    gtk_calendar_freeze(GTK_CALENDAR(get_widget(self)));
    return self;
}

static VALUE
cal_thaw(self)
    VALUE self;
{
    gtk_calendar_thaw(GTK_CALENDAR(get_widget(self)));
    return self;
}

void Init_gtk_calendar()
{
    gCalendar = rb_define_class_under(mGtk, &quot;Calendar&quot;, gWidget);

    rb_define_const(gCalendar, &quot;SHOW_HEADING&quot;,
		    INT2FIX(GTK_CALENDAR_SHOW_HEADING));
    rb_define_const(gCalendar, &quot;SHOW_DAY_NAMES&quot;,
		    INT2FIX(GTK_CALENDAR_SHOW_DAY_NAMES));
    rb_define_const(gCalendar, &quot;NO_MONTH_CHANGE&quot;,
		    INT2FIX(GTK_CALENDAR_NO_MONTH_CHANGE));
    rb_define_const(gCalendar, &quot;SHOW_WEEK_NUMBERS&quot;,
		    INT2FIX(GTK_CALENDAR_SHOW_WEEK_NUMBERS));
    rb_define_const(gCalendar, &quot;WEEK_START_MONDAY&quot;,
		    INT2FIX(GTK_CALENDAR_WEEK_START_MONDAY));

    rb_define_const(gCalendar, &quot;SIGNAL_MONTH_CHANGED&quot;,
		    rb_str_new2(&quot;month_changed&quot;));
    rb_define_const(gCalendar, &quot;SIGNAL_DAY_SELECTED&quot;,
		    rb_str_new2(&quot;day_selected&quot;));
    rb_define_const(gCalendar, &quot;SIGNAL_DAY_SELECTED_DOUBLE_CLICK&quot;,
		    rb_str_new2(&quot;day_selected_double_click&quot;));
    rb_define_const(gCalendar, &quot;SIGNAL_PREV_MONTH&quot;,
		    rb_str_new2(&quot;prev_month&quot;));
    rb_define_const(gCalendar, &quot;SIGNAL_NEXT_MONTH&quot;,
		    rb_str_new2(&quot;next_month&quot;));
    rb_define_const(gCalendar, &quot;SIGNAL_PREV_YEAR&quot;,
		    rb_str_new2(&quot;prev_year&quot;));
    rb_define_const(gCalendar, &quot;SIGNAL_NEXT_YEAR&quot;,
		    rb_str_new2(&quot;next_year&quot;));

    rb_define_method(gCalendar, &quot;initialize&quot;, cal_init, 0);
    rb_define_method(gCalendar, &quot;select_month&quot;, cal_select_month, 2);
    rb_define_method(gCalendar, &quot;select_day&quot;, cal_select_day, 1);
    rb_define_method(gCalendar, &quot;mark_day&quot;, cal_mark_day, 1);
    rb_define_method(gCalendar, &quot;unmark_day&quot;, cal_unmark_day, 1);
    rb_define_method(gCalendar, &quot;clear_marks&quot;, cal_clear_marks, 0);
    rb_define_method(gCalendar, &quot;display_options&quot;, cal_display_options, 1);
    rb_define_method(gCalendar, &quot;get_date&quot;, cal_get_date, 0);
    rb_define_method(gCalendar, &quot;freeze&quot;, cal_freeze, 0);
    rb_define_method(gCalendar, &quot;thaw&quot;, cal_thaw, 0);

    rb_define_alias(gCalendar, &quot;date&quot;, &quot;get_date&quot;);
}

/*
 * Local Variables:
 *  c-file-style: &quot;bsd&quot;
 * End:
 */
</pre><pre>require 'gtk'

cal = Gtk::Calendar.new
w = Gtk::Window.new(Gtk::WINDOW_TOPLEVEL)
w.add(cal).show_all.signal_connect('delete_event') do
  Gtk::main_quit
end
cal.select_month(7, 1974)
cal.select_day(15)
cal.mark_day(20)
cal.clear_marks
#cal.display_options(Gtk::Calendar::SHOW_HEADING |
#		    Gtk::Calendar::SHOW_DAY_NAMES |
#		    Gtk::Calendar::NO_MONTH_CHANGE |
#		    Gtk::Calendar::SHOW_WEEK_NUMBERS |
#		    Gtk::Calendar::WEEK_START_MONDAY)
year, month, day = cal.get_date
print &quot;this is #{month} #{day}, #{year}\n&quot;

cal.signal_connect('day_selected') do
  year, month, day = cal.date
  print &quot;selected day: &quot;, day, &quot;\n&quot;
end
cal.signal_connect('month_changed') do
  year, month, day = cal.date
  print &quot;changed month: &quot;, month, &quot;\n&quot;
end
cal.signal_connect('day_selected_double_click') do
  year, month, day = cal.date
  print &quot;dclicked day: &quot;, day, &quot;\n&quot;
end
cal.signal_connect('prev_month') do
  year, month, day = cal.date
  print &quot;prev month: &quot;, month, &quot;\n&quot;
end
cal.signal_connect('next_month') do
  year, month, day = cal.date
  print &quot;next_month: &quot;, month, &quot;\n&quot;
end
cal.signal_connect('prev_year') do
  year, month, day = cal.date
  print &quot;prev_year: &quot;, year, &quot;\n&quot;
end
cal.signal_connect('next_year') do
  year, month, day = cal.date
  print &quot;next year: &quot;, year, &quot;\n&quot;
end

Gtk::main
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00232" href="msg00232.html">[mhc:00233] Re: signal delete_event on Mhc::DayBook</a></strong>
<ul><li><em>From:</em> Yoshinari NOMURA</li></ul></li>
<li><strong><a name="00235" href="msg00235.html">[mhc:00236] Re: signal delete_event on Mhc::DayBook</a></strong>
<ul><li><em>From:</em> Yasushi Shoji</li></ul></li>
<li><strong><a name="00236" href="msg00236.html">[mhc:00237] Re: signal delete_event on Mhc::DayBook</a></strong>
<ul><li><em>From:</em> Yoshinari NOMURA</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00236.html">[mhc:00237] Re: signal delete_event on Mhc::DayBook</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00238.html">[mhc:00239] mhc-snap19991129</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00236.html">[mhc:00237] Re: signal delete_event on Mhc::DayBook</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00234.html">[mhc:00235] mhc-0.23.1</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00237"><strong>Date</strong></a></li>
<li><a href="threads.html#00237"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

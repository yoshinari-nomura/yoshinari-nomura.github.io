<!-- MHonArc v2.6.16 -->
<!--X-Subject: [mhc:00422] Re: mhc&#45;snap20000229 -->
<!--X-From-R13: Vvqrlhxv EVWDOW (=?vfb&#45;2022&#45;wc?P?UlDQD3WjLw0bAHCoYSW=?=) <fuvenvNeqzt.ztpf.zrv.pb.wc> -->
<!--X-Date: Tue, 29 Feb 2000 20:57:24 +0900 -->
<!--X-Message-Id: 20000229.205624.120885158.shirai@rdmg.mgcs.mei.co.jp -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: 20000229185803F.nom@csce.kyushu&#45;u.ac.jp -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[mhc:00422] Re: mhc-snap20000229</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00420.html">Date Prev</a>][<a href="msg00422.html">Date Next</a>][<a href="msg00420.html">Thread Prev</a>][<a href="msg00422.html">Thread Next</a>][<a href="maillist.html#00421">Date Index</a>][<a href="threads.html#00421">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[mhc:00422] Re: mhc-snap20000229</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:mhc@DOMAIN.HIDDEN">mhc@xxxxxxxxxxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: [mhc:00422] Re: mhc-snap20000229</li>
<li><em>From</em>: Hideyuki SHIRAI (&#x767D;&#x4E95;&#x79C0;&#x884C;) &lt;<a href="mailto:shirai@DOMAIN.HIDDEN">shirai@xxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Tue, 29 Feb 2000 20:57:24 +0900</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:20000229185803F.nom@DOMAIN.HIDDEN">20000229185803F.nom@xxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Posted</em>: Tue, 29 Feb 2000 20:56:24 +0900 (JST)</li>
<li><em>References</em>: &lt;<a href="mailto:20000229185803F.nom@DOMAIN.HIDDEN">20000229185803F.nom@xxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Reply-to</em>: <a href="mailto:mhc@DOMAIN.HIDDEN">mhc@xxxxxxxxxxxxxxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>From: Yoshinari NOMURA &lt;nom@xxxxxxxxxxxxxxxxxxx&gt; &#x3055;&#x3093;&#x66F0;&#x304F;
Subject: [mhc:00421] mhc-snap20000229
Message-ID: &lt;20000229185803F.nom@xxxxxxxxxxxxxxxxxxx&gt;
Date: Tue, 29 Feb 2000 18:58:08 +0900

nom&gt; &#x4E43;&#x6751;&#x3067;&#x3059;&#x3002;&#x5FD9;&#x3057;&#x3055;&#x3082;&#x4E00;&#x5C71;&#x8D8A;&#x3048;&#x307E;&#x3057;&#x305F;&#x3002;&#x3068;&#x308A;&#x3042;&#x3048;&#x305A;&#x3001;&#x3053;&#x308C;&#x307E;&#x3067;&#x9802;&#x3044;&#x305F;&#x30D1;&#x30C3;
nom&gt; &#x30C1;&#x3092;&#x6574;&#x7406;&#x3057;&#x3066; snap &#x3092;&#x4F5C;&#x308A;&#x307E;&#x3057;&#x305F;&#x3002;

&#x304A;&#x75B2;&#x308C;&#x69D8;&#x3067;&#x3059;&#x3002;

nom&gt; &#x307B;&#x3068;&#x3093;&#x3069;&#x9802;&#x3044;&#x305F;&#x30D1;&#x30C3;&#x30C1;&#x3092;&#x5F53;&#x3066;&#x305F;&#x3060;&#x3051;&#x306E;&#x7269;&#x3067;&#x3001;&#x81EA;&#x5206;&#x3067;&#x306F;&#x5341;&#x5206;&#x306B;&#x30C1;&#x30A7;&#x30C3;&#x30AF;&#x3067;
nom&gt; &#x304D;&#x3066;&#x3044;&#x307E;&#x305B;&#x3093;&#x3002;19.28 &#x5BFE;&#x5FDC;&#x306E;&#x78BA;&#x8A8D;&#x3082;&#x3067;&#x304D;&#x3066;&#x3044;&#x307E;&#x305B;&#x3093;&#x3002;

&#x3053;&#x308C;&#x3063;&#x3066;&#x3001;

nom&gt;     + 19.28 &#x306E; macro &#x66F8;&#x5F0F;&#x306B;&#x623B;&#x3059;&#x3002;

&#x306E;&#x3053;&#x3068;&#x3067;&#x3059;&#x304B;&#xFF1F; &#x4ECA;&#x306E;&#x3068;&#x3053;&#x308D;&#x554F;&#x984C;&#x306F;&#x306A;&#x3044;&#x3067;&#x3059;&#x3002;

nom&gt;     + 3&#x30F6;&#x6708;&#x8868;&#x793A;&#x3067;&#x3001;&#x4E88;&#x5B9A;&#x306E;&#x3042;&#x308B;&#x65E5;&#x306B;&#x4E0B;&#x7DDA;&#x3092;&#x5F15;&#x3044;&#x3066;&#x307F;&#x305F; (&#x3046;&#x308B;&#x3055;&#x3044;?)

## &#x6D3E;&#x624B;&#x306A;&#x306E;&#x597D;&#x304D;&#x3067;&#x3059;&#x3002;:-)

&#x4EE5;&#x4E0B;&#x3001;&#x672C;&#x984C;&#x3002;

nom&gt;     + face &#x306E;&#x8A2D;&#x5B9A; mhc-category-face-alist, mhc-symbol-face-alist &#x66F8;&#x5F0F;&#x3092;&#x5909;&#x66F4;

face &#x56DE;&#x308A;&#x306A;&#x306E;&#x3067;&#x3059;&#x304C;&#x3001;

&#x25CF; XEmacs &#x3060;&#x3068; (facep 'italic) &#x3063;&#x3066;
&#x30FB;(facep 'italic) =&gt; nil
&#x30FB;(find-face 'italic) =&gt; #&lt;face italic &quot;Italic text.&quot;&gt;
 &#x3068;&#x306A;&#x308A;&#x307E;&#x3059;&#x3002;&#x5B9F;&#x306F;&#x6700;&#x521D;&#x304B;&#x3089; XEmacs &#x3060;&#x3051;&#x30E6;&#x30FC;&#x30B6;&#x5B9A;&#x7FA9;&#x304C;&#x52B9;&#x304D;&#x307E;&#x3057;&#x305F;&#x3002;

&#x25CF; &#x3046;&#x301C;&#x301C;&#x3093;&#x3001;&#x30E6;&#x30FC;&#x30B6;&#x5B9A;&#x7FA9;&#x304C;&#x52B9;&#x304B;&#x306A;&#x3044;&#x3002;
 1. mhc.el &#x304C; load &#x3055;&#x308C;&#x305F;&#x3068;&#x304D;&#x306B;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x308B; (mhc-face-setup) &#x306F;
  interactive &#x3067;&#x306F;&#x306A;&#x3044;&#x304B;&#x3089; overwrite &#x3055;&#x308C;&#x306A;&#x3044;&#x3002;
  (call-interactively 'mhc-face-setup) &#x3067;&#x3082;&#x3044;&#x3044;&#x3051;&#x3069;&#x306A;&#x3093;&#x304B;&#x6C17;&#x6301;&#x60AA;&#x3044;&#x3002;
  
 2. 'M-x mhc-face-setup' &#x3068;&#x3057;&#x305F;&#x3068;&#x304D;&#x306F; (interactive-p) =&gt; t &#x3060;&#x3051;&#x3069;
  let &#x5F0F;&#x306E; () &#x304C;&#x8DB3;&#x3089;&#x306A;&#x3044;&#x304B;&#x3089; overwrite &#x3055;&#x308C;&#x306A;&#x3044;&#x3002;

 3. (setq mhc-category-face-alist '((&quot;holiday&quot;  . (italic &quot;Red&quot;))))
  &#x3068;&#x3057;&#x3066; 2. &#x3092;&#x76F4;&#x3057;&#x3066; M-x mhc-face-setup &#x3059;&#x308B;&#x3068;&#x30A8;&#x30E9;&#x30FC;&#x306B;&#x306A;&#x308B;&#x3002;

&#x306E;&#x30D1;&#x30C3;&#x30C1;&#x3067;&#x3059;

-- 
&#x767D;&#x4E95;&#x79C0;&#x884C; (<a  rel="nofollow" href="mailto:shirai@xxxxxxxxxxxxxxxxxxx">mailto:shirai@xxxxxxxxxxxxxxxxxxx</a>)
</pre><pre>--- mhc-face.el.orig	Tue Feb 22 19:21:19 2000
+++ mhc-face.el	Tue Feb 29 20:45:37 2000
@@ -67,7 +67,8 @@
       'default))
 
 (defun mhc-face-make-face-from-string (string prop &amp;optional prefix overwrite)
-  (let ((symbol-name (concat prefix (if prefix &quot;-&quot;) string)))
+  (let ((symbol-name 
+	 (if (stringp prefix) (concat prefix &quot;-&quot; string) string)))
     (mhc-face-make-face-from-symbol (intern symbol-name) prop overwrite)))
 
 (defun mhc-face-make-face-from-symbol (symbol prop &amp;optional overwrite)
@@ -78,7 +79,7 @@
 	(font    (nth 4 prop))
 	(stipple (nth 5 prop))
 	(face    nil))
-    (if (and (facep symbol) (not overwrite))
+    (if (and (mhc-facep symbol) (not overwrite))
 	symbol
       (setq face (if parent (copy-face parent symbol) (make-face symbol)))
       (if fg      (set-face-foreground  face fg))
@@ -93,7 +94,7 @@
 
 (defun mhc-face-get-gray-face (face)
   (let ((gray-symbol (intern (concat (symbol-name face) &quot;-gray&quot;))))
-    (if (facep gray-symbol)
+    (if (mhc-facep gray-symbol)
 	()
       (copy-face face gray-symbol)
       (set-face-background gray-symbol &quot;gray&quot;))
@@ -101,7 +102,7 @@
 
 (defun mhc-face-get-busy-face (face)
   (let ((busy-symbol (intern (concat (symbol-name face) &quot;-busy&quot;))))
-    (if (facep busy-symbol)
+    (if (mhc-facep busy-symbol)
 	()
       (copy-face face busy-symbol)
       (or (make-face-bold busy-symbol nil t)
@@ -111,7 +112,7 @@
 
 (defun mhc-face-get-underline-face (face)
   (let ((busy-symbol (intern (concat (symbol-name face) &quot;-uline&quot;))))
-    (if (facep busy-symbol)
+    (if (mhc-facep busy-symbol)
 	()
       (copy-face face busy-symbol)
       (set-face-underline-p busy-symbol t))
@@ -120,9 +121,9 @@
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;; setup faces.
 
-(defun mhc-face-setup ()
+(defun mhc-face-setup (&amp;optional overwrite)
   (interactive)
-  (let (ow (interactive-p))
+  (let ((ow (or (interactive-p) overwrite)))
     ;;
     (mhc-face-setup-internal mhc-symbol-face-alist-internal ow)
     (mhc-face-setup-internal mhc-symbol-face-alist          ow)
@@ -141,6 +142,7 @@
 	(mhc-face-make-face-from-string 
 	 (format &quot;mhc-category-face-%s&quot; (downcase (car lst)))
 	 (cdr lst)
+	 nil
 	 overwrite))
        ((symbolp (car lst))
 	(mhc-face-make-face-from-symbol
@@ -152,15 +154,20 @@
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;; facep for emacs 19.28
 
-(or (fboundp 'facep)
-    ;; Introduced in Emacs 19.29.
-    (defun facep (x)
-      &quot;Return t if X is a face name or an internal face vector.&quot;
-      (and (or (and (fboundp 'internal-facep) (internal-facep x))
-	       (and 
-		(symbolp x) 
-		(assq x (and (boundp 'global-face-data) global-face-data))))
-	   t)))
+(cond
+ ((fboundp 'find-face)
+  (defalias 'mhc-facep 'find-face))
+ ((fboundp 'facep)
+  (defalias 'mhc-facep 'facep))
+ (t
+  ;; Introduced in Emacs 19.29.
+  (defun mhc-facep (x)
+    &quot;Return t if X is a face name or an internal face vector.&quot;
+    (and (or (and (fboundp 'internal-facep) (internal-facep x))
+	     (and 
+	      (symbolp x) 
+	      (assq x (and (boundp 'global-face-data) global-face-data))))
+	 t))))
 
 (provide 'mhc-face)
 
--- mhc.el.orig	Tue Feb 29 19:52:24 2000
+++ mhc.el	Tue Feb 29 20:47:34 2000
@@ -1026,7 +1026,7 @@
     (view-file-other-window path)))
 
 (mhc-db-setup mhc-schedule-file (mhc-summary-folder-to-path mhc-base-folder))
-(mhc-face-setup)
+(mhc-face-setup 'overwrite)
 (put-text-property 2 4 'face 'mhc-calendar-face-sunday  mhc-cal-week-header)
 (put-text-property 20 22 'face 'mhc-calendar-face-saturday mhc-cal-week-header)
 
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00422" href="msg00422.html">[mhc:00423] Re: mhc-snap20000229</a></strong>
<ul><li><em>From:</em> &#x767D;&#x4E95;&#x79C0;&#x884C;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00420" href="msg00420.html">[mhc:00421] mhc-snap20000229</a></strong>
<ul><li><em>From:</em> Yoshinari NOMURA</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00420.html">[mhc:00421] mhc-snap20000229</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00422.html">[mhc:00423] Re: mhc-snap20000229</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00420.html">[mhc:00421] mhc-snap20000229</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00422.html">[mhc:00423] Re: mhc-snap20000229</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00421"><strong>Date</strong></a></li>
<li><a href="threads.html#00421"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

<!-- MHonArc v2.6.16 -->
<!--X-Subject: [mhc:00912] Re: New draft -->
<!--X-From-R13: Vvqrlhxv EVWDOW (=?vfb&#45;2022&#45;wc?P?UlDQD3WjLw0bAHCoYSW=?=) <fuvenvNdhvpxunpx.arg> -->
<!--X-Date: Thu, 03 Aug 2000 15:44:37 +0900 (JST) -->
<!--X-Message-Id: 20000803.154437.30948661.shirai@rdmg.mgcs.mei.co.jp -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: fzpunzytgk.wl@elmo.dq.isl.ntt.co.jp -->
<!--X-Reference: 20000802.061617.13577119.hshirai@netlaputa.ne.jp -->
<!--X-Reference: 20000802.144008.68558537.shirai@rdmg.mgcs.mei.co.jp -->
<!--X-Reference: 20000803103149O.nom@csce.kyushu&#45;u.ac.jp -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[mhc:00912] Re: New draft</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00910.html">Date Prev</a>][<a href="msg00912.html">Date Next</a>][<a href="msg00910.html">Thread Prev</a>][<a href="msg00912.html">Thread Next</a>][<a href="maillist.html#00911">Date Index</a>][<a href="threads.html#00911">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[mhc:00912] Re: New draft</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:mhc@DOMAIN.HIDDEN">mhc@xxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: [mhc:00912] Re: New draft</li>
<li><em>From</em>: Hideyuki SHIRAI (&#x767D;&#x4E95;&#x79C0;&#x884C;) &lt;<a href="mailto:shirai@DOMAIN.HIDDEN">shirai@xxxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Thu, 03 Aug 2000 15:44:37 +0900 (JST)</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:20000803103149O.nom@DOMAIN.HIDDEN">20000803103149O.nom@xxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Organization</em>: QuickHackers, Tokyo, JAPAN</li>
<li><em>References</em>: &lt;<a href="mailto:fzpunzytgk.wl@DOMAIN.HIDDEN">fzpunzytgk.wl@xxxxxxxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:20000802.061617.13577119.hshirai@DOMAIN.HIDDEN">20000802.061617.13577119.hshirai@xxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:20000802.144008.68558537.shirai@DOMAIN.HIDDEN">20000802.144008.68558537.shirai@xxxxxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:20000803103149O.nom@DOMAIN.HIDDEN">20000803103149O.nom@xxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Reply-to</em>: <a href="mailto:mhc@DOMAIN.HIDDEN">mhc@xxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>&#x767D;&#x4E95;&#x3067;&#x3059;&#x3002;

# &#x304A;&#x4F11;&#x307F;&#x306A;&#x3082;&#x306E;&#x3067;&#x3057;&#x3066;&#x53CD;&#x5FDC;&#x304C;&#x9045;&#x3044;&#x3067;&#x3059;&#x3002;(_ _)

From: Yoshinari Nomura &lt;nom@xxxxxxxxxxxxxxxxxxx&gt; &#x3055;&#x3093;&#x66F0;&#x304F;
Subject: [mhc:00911] Re: New draft
Message-ID: &lt;20000803103149O.nom@xxxxxxxxxxxxxxxxxxx&gt;
Date: Thu, 03 Aug 2000 10:31:49 +0900

nom&gt; &gt; &#x308F;&#x305F;&#x3057;&#x306F; Mew 1.95b43 &#x3067;&#x52D5;&#x304B;&#x3057;&#x3066;&#x3044;&#x307E;&#x3059;&#x304C;&#x3001;(&#x76EE;&#x8996;&#x78BA;&#x8A8D;&#x3060;&#x3068;)Mew 1.94
nom&gt; &gt; &#x3067;&#x3082;&#x52D5;&#x304F;&#x3068;&#x601D;&#x3044;&#x307E;&#x3059;&#x3002;
nom&gt; 
nom&gt; &#x3054;&#x3081;&#x3093;&#x306A;&#x3055;&#x3044;&#x3002;&#x5831;&#x544A;&#x3060;&#x3051;&#x3002;Mew version 1.94.2 on Emacs 20.6 &#x3067;&#x3059;&#x304C;&#x3001;
nom&gt; 
nom&gt; &#x306E;&#x3088;&#x3046;&#x306A;&#x30B9;&#x30B1;&#x30B8;&#x30E5;&#x30FC;&#x30EB;&#x306E;&#x3001;9/28&#x65E5;&#x3060;&#x3051;&#x3092;&#x6D88;&#x305D;&#x3046;&#x3068;&#x3057;&#x3066;&#x3001;
nom&gt; C-cd y n y &#x3068;&#x62BC;&#x3059;&#x3068;&#x3001;&#x4EE5;&#x4E0B;&#x306E;&#x30A8;&#x30E9;&#x30FC;&#x304C;&#x51FA;&#x307E;&#x3059;&#x3002;

&#x3046;&#x308E;&#x3041;&#x3001;&#x3053;&#x3063;&#x3061;&#x304B;&#x3089;&#x3082;&#x3088;&#x3070;&#x308C;&#x308B;&#x3093;&#x3060;&#x3002;&#x6C17;&#x4ED8;&#x304D;&#x307E;&#x305B;&#x3093;&#x3067;&#x3057;&#x305F;&#x3002;^^;;;

(&#x82E5;&#x5E72;&#x305D;&#x306E;&#x4ED6;&#x306E;&#x3082;&#x306E;&#x3082;&#x542B;&#x3080;&#x306E;&#x3067;&#x3059;&#x304C;)&#x30D1;&#x30C3;&#x30C1;1&#x3092;&#x3069;&#x3046;&#x305E;&#x3002;&#x5F8C;&#x3067; commit &#x3057;
&#x3066;&#x304A;&#x304D;&#x307E;&#x3059;&#x3002;

&#x25CB; New draft &#x306E;&#x5225;&#x306E;&#x8A71;
current &#x306E; Mew &#x3067;(&#x30E1;&#x30FC;&#x30EB;&#x304B;&#x3089;&#x306E; import &#x3067;&#x306F;&#x306A;&#x3044;) schedule &#x3092;&#x3064;&#x304F;
&#x308B;&#x3068;&#x3001;&#x305F;&#x3068;&#x3048;&#x3070;&#x3001;

------------------------------------------------------
X-SC-Subject: =?iso-2022-jp?B?GyRCRy81WSRIJCQkQyRGJGIbKEI=?=
X-SC-Day: 20000803
X-SC-Location: =?iso-2022-jp?B?GyRCO1I2ISROQCRPQyRAJDEbKEI=?= ;_;
 &lt;&lt;snip&gt;&gt;
X-SC-Record-Id: &lt;1234foo@xxxxxxxx&gt;
MIME-Version: 1.0 
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
------------------------------------------------------

&#x306E;&#x69D8;&#x306B; mime-version &#x3084; ct, cte &#x3092;&#x3064;&#x3051;&#x3066; schedule &#x3092;&#x4F5C;&#x308A;&#x307E;&#x3059;&#x304C;&#x3001;
&#x6B21;&#x306B; mhc &#x3067;&#x3053;&#x306E; schedule &#x3092;&#x8868;&#x793A;&#x3057;&#x3066; &quot;C-c |&quot; &#x3059;&#x308B;&#x3068;&#x3001;&quot;From:&quot; &#x304C;&#x7121;
&#x3044;&#x305F;&#x3081; message &#x3068;&#x898B;&#x306A;&#x3055;&#x306A;&#x3044;&#x306E;&#x3067;&#x3001;mime-version &#x306E;&#x524D;&#x306B; header
separator &#x3092;&#x3064;&#x3051;&#x3066;&#x3057;&#x307E;&#x3044;&#x307E;&#x3059;&#x3002;

&#x30D1;&#x30C3;&#x30C1;2 &#x306E;&#x69D8;&#x306B;&#x6539;&#x9020;&#x3057;&#x305F;&#x3044;&#x306E;&#x3067;&#x3059;&#x304C;&#x3001;SEMI &#x3067;&#x3082;&#x554F;&#x984C;&#x306A;&#x3044;&#x3067;&#x3057;&#x3087;&#x3046;&#x304B;&#x3002;

# &#x3068;&#x3044;&#x3046;&#x304B; SEMI &#x3067;&#x3082;&#x4E00;&#x7DD2;&#x306E;&#x75C7;&#x72B6;&#x304C;&#x51FA;&#x308B;&#x3068;&#x601D;&#x3046;&#x306E;&#x3060;&#x3051;&#x3069;&#x3002;&#x3002;&#x3002;

P.S.
&#x5C71;&#x4E0B;&#x3055;&#x3093;&#x5B9F;&#x9A13;&#x3042;&#x308A;&#x304C;&#x3068;&#x3046;&#x3054;&#x3056;&#x3044;&#x307E;&#x3059;&#x3002;&#x81EA;&#x5206;&#x3067;&#x74B0;&#x5883;&#x3092;&#x4F5C;&#x3063;&#x3066;&#x52D5;&#x4F5C;&#x3055;&#x305B;&#x3066;&#x307F;
&#x307E;&#x3059;&#x3002;

-- 
&#x767D;&#x4E95;&#x79C0;&#x884C; (<a  rel="nofollow" href="mailto:shirai@xxxxxxxxxxxxx">mailto:shirai@xxxxxxxxxxxxx</a>)
</pre><pre>--- mhc-mew.el.orig	Wed Aug  2 18:47:38 2000
+++ mhc-mew.el	Thu Aug  3 14:50:18 2000
@@ -2,7 +2,7 @@
 
 ;; Author:  Yoshinari Nomura &lt;nom@xxxxxxxxxxxxx&gt;,
 ;; Created: 2000/05/10
-;; Revised: $Date$
+;; Revised: $Date: 2000/08/02 08:06:55 $
 
 
 ;;; Commentary:
@@ -198,9 +198,11 @@
   (mhc-header-narrowing
     (mhc-header-delete-header &quot;x-mew&quot;))
   (goto-char (point-min))
-  (and (re-search-forward &quot;^$&quot; nil t)
-       (mew-header-set mew-header-separator)))
-
+  (re-search-forward &quot;^$&quot; nil 'limit)
+  (or (= (current-column) 0) (insert &quot;\n&quot;))
+  (mew-header-set mew-header-separator)
+  (goto-char (point-min)))
+    
 
 (defun mhc-mew-draft-reedit-file (file)
   (erase-buffer)
@@ -218,8 +220,9 @@
   (mhc-header-narrowing
     (mhc-header-delete-header &quot;x-mew&quot;))
   (goto-char (point-min))
-  (and (re-search-forward &quot;^$&quot; nil t)
-       (mew-header-set mew-header-separator))
+  (re-search-forward &quot;^$&quot; nil 'limit)
+  (or (= (current-column) 0) (insert &quot;\n&quot;))
+  (mew-header-set mew-header-separator)
   (goto-char (point-min)))
 
 
@@ -248,9 +251,12 @@
 		     (re-search-forward (concat &quot;^--&quot; boundary &quot;--$&quot;) nil t))
 	  ;; looks like Broken multi-part message.
 	  (setq boundary nil))))
-    (mew-header-encode-region (point-min) (mew-header-end))
-    (mew-header-clear)
-    (insert &quot;\n&quot;)
+    (if (null (mew-header-end))
+	(mhc-header-narrowing
+	  (mew-header-encode-region (point-min) (point-max)))
+      (mew-header-encode-region (point-min) (mew-header-end))
+      (mew-header-clear)
+      (insert &quot;\n&quot;))
     (if (null boundary)
 	;; text/plain
 	(progn
</pre><pre>--- mhc.el.orig	Wed Aug  2 18:47:40 2000
+++ mhc.el	Thu Aug  3 14:52:50 2000
@@ -312,11 +312,6 @@
 
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;; import, edit, delete, modify
-(defun mhc/buffer-message-p ()
-  &quot;Return non-nil if current buffer looks like message.&quot;
-  (mhc-header-narrowing
-    (mhc-header-get-value &quot;from&quot;)))
-
 (defun mhc-edit (&amp;optional import-buffer)
   &quot;Edit a new schedule.
 If optional argument IMPORT-BUFFER is specified, import its content.
@@ -328,7 +323,7 @@
   (let ((draft-buffer (generate-new-buffer mhc-draft-buffer-name))
 	(current-date (or (mhc-current-date) (mhc-calendar-get-date)))
 	(succeed t)
-	date time subject location category priority)
+	msgp date time subject location category priority)
     (and (interactive-p)
 	 (mhc-window-push))
     (set-buffer draft-buffer)
@@ -338,6 +333,8 @@
 			     (cdr import-buffer)
 			   import-buffer))
 	  (mhc-header-narrowing
+	    (setq msgp (or (mhc-header-get-value &quot;from&quot;)
+			   (mhc-header-get-value &quot;x-sc-subject&quot;)))
 	    (mhc-header-delete-header
 	     (concat &quot;^\\(&quot;
 		     (mhc-regexp-opt mhc-draft-unuse-hdr-list)
@@ -417,8 +414,7 @@
 	(progn
 	  (switch-to-buffer draft-buffer t)
 	  (set-buffer draft-buffer)
-	  (if (and import-buffer
-		   (mhc/buffer-message-p))
+	  (if (and import-buffer msgp)
 	      (if (consp import-buffer)
 		  (mhc-draft-reedit-buffer (car import-buffer) 'original)
 		;; Delete candidate overlay if exists.
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00912" href="msg00912.html">[mhc:00913] Re: New draft</a></strong>
<ul><li><em>From:</em> Yoshinari NOMURA</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00834" href="msg00834.html">[mhc:00835] New draft</a></strong>
<ul><li><em>From:</em> Yuuichi Teranishi</li></ul></li>
<li><strong><a name="00894" href="msg00894.html">[mhc:00895] Re: New draft</a></strong>
<ul><li><em>From:</em> &#x767D;&#x4E95;&#x79C0;&#x884C;</li></ul></li>
<li><strong><a name="00910" href="msg00910.html">[mhc:00911] Re: New draft</a></strong>
<ul><li><em>From:</em> Yoshinari Nomura</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00910.html">[mhc:00911] Re: New draft</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00912.html">[mhc:00913] Re: New draft</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00910.html">[mhc:00911] Re: New draft</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00912.html">[mhc:00913] Re: New draft</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00911"><strong>Date</strong></a></li>
<li><a href="threads.html#00911"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

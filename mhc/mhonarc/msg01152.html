<!-- MHonArc v2.6.16 -->
<!--X-Subject: [mhc:01153] Re: emacs/mhc&#45;mime.el and... -->
<!--X-From-R13: Yrvvpuv Ehmhxv <xrvvpuvNananc.bet> -->
<!--X-Date: 13 Dec 2000 13:12:35 +0900 -->
<!--X-Message-Id: uaea1dkng.fsf@kei.nanap.org -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: uy9xnz618.fsf@kei.nanap.org -->
<!--X-Reference: 20001213124559V.nom@csce.kyushu&#45;u.ac.jp -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[mhc:01153] Re: emacs/mhc-mime.el and...</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg01151.html">Date Prev</a>][<a href="msg01153.html">Date Next</a>][<a href="msg01153.html">Thread Prev</a>][<a href="msg01154.html">Thread Next</a>][<a href="maillist.html#01152">Date Index</a>][<a href="threads.html#01152">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[mhc:01153] Re: emacs/mhc-mime.el and...</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:mhc@DOMAIN.HIDDEN">mhc@xxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: [mhc:01153] Re: emacs/mhc-mime.el and...</li>
<li><em>From</em>: Keiichi Suzuki &lt;<a href="mailto:keiichi@DOMAIN.HIDDEN">keiichi@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: 13 Dec 2000 13:12:35 +0900</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:20001213124559V.nom@DOMAIN.HIDDEN">20001213124559V.nom@xxxxxxxxxxxxxxxxxxx</a>&gt; (Yoshinari Nomura's message of &quot;Wed, 13 Dec 2000 12:45:59 +0900&quot;)</li>
<li><em>Organization</em>: Nanap</li>
<li><em>References</em>: &lt;<a href="mailto:uy9xnz618.fsf@DOMAIN.HIDDEN">uy9xnz618.fsf@xxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20001213124559V.nom@DOMAIN.HIDDEN">20001213124559V.nom@xxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Reply-to</em>: <a href="mailto:mhc@DOMAIN.HIDDEN">mhc@xxxxxxxxxxxxx</a></li>
<li><em>Sender</em>: <a href="mailto:keiichi@DOMAIN.HIDDEN">keiichi@xxxxxxxxxxxx</a></li>
<li><em>User-agent</em>: Nana-gnus/7.1.0.24 EMY/1.13.9 (Art is long, life is short) FLIM/1.14.0 (Ninokuchi) APEL/10.2 Emacs/20.7 (i386-*-nt5.0.2195) MULE/4.1 (AOI) Meadow/1.13-Beta1++ (TANAHASHI:61)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>&gt;&gt;&gt;&gt;&gt; mhc &#x306E; No. 01150
&gt;&gt;&gt;&gt;&gt; Message-Id: &lt;20001213124559V.nom@xxxxxxxxxxxxxxxxxxx&gt; &#x3067;&#x3001;
&gt;&gt;&gt;&gt;&gt; &quot;&#x4E43;&#x6751;&quot; == Yoshinari Nomura &lt;nom@xxxxxxxxxxxxxxxxxxx&gt;&#x3055;&#x307E;&#x66F0;&#x304F;...

&gt;&gt; ;; &#x67D0;&#x6240;&#x3067;&#x61F8;&#x6848;&#x4E8B;&#x9805;&#x3068;&#x306A;&#x3063;&#x3066;&#x3044;&#x307E;&#x3057;&#x305F;&#x306E;&#x3067;&#x3001;&#x3057;&#x3070;&#x3089;&#x304F;&#x524D;&#x304B;&#x3089;&#x4F7F;&#x308F;&#x305B;&#x3066;&#x3044;
&gt;&gt; ;; &#x305F;&#x3060;&#x3044;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;

&#x4E43;&#x6751;&gt; &#x67D0;&#x6240;&#x3068;&#x306F;&#x3069;&#x3061;&#x3089;&#x3067;&#x3057;&#x3087;&#x3046;&#x3002;&#x5DEE;&#x3057;&#x652F;&#x3048;&#x306A;&#x3051;&#x308C;&#x3070;&#x6559;&#x3048;&#x3066;&#x3044;&#x305F;&#x3060;&#x3051;&#x307E;&#x305B;
&#x4E43;&#x6751;&gt; &#x3093;&#x304B;&#x3002;

&#x3059;&#x307F;&#x307E;&#x305B;&#x3093;&#x3001;&#x3053;&#x3046;&#x3044;&#x3046;&#x66F8;&#x304D;&#x65B9;&#x306F;&#x826F;&#x304F;&#x306A;&#x3044;&#x3067;&#x3059;&#x306D;&#x3002;

FreeTalk &#x3068;&#x3044;&#x3046;&#x30E1;&#x30A4;&#x30EA;&#x30F3;&#x30B0;&#x30EA;&#x30B9;&#x30C8;&#x3067;&#x3001;&#x79C1;&#x304C; MHC mode &#x306F; minor-mode
&#x306E; coding standard &#x306B;&#x3042;&#x3063;&#x3066;&#x3044;&#x306A;&#x3044;&#x304B;&#x3089;&#x30E4;&#x30C0;&#x3001;&#x306A;&#x3069;&#x3068;&#x8A00;&#x3044;&#x51FA;&#x3057;&#x305F;&#x306B;&#x3082;
&#x304B;&#x304B;&#x308F;&#x3089;&#x305A;&#x3001;&#x3042;&#x308F;&#x305B;&#x3066;&#x3044;&#x305F;&#x3060;&#x3044;&#x305F;&#x5F8C;&#x3082;&#x591A;&#x5FD9;&#x306B;&#x304B;&#x307E;&#x3051;&#x3066;&#x8A66;&#x3057;&#x3066;&#x3082;&#x3044;&#x306A;&#x304B;&#x3063;
&#x305F;&#x306E;&#x3067;&#x3059;&#x3002;

&gt;&gt; 2. C-c . | &#x3067; import &#x5143;&#x306E;&#x30E1;&#x30C3;&#x30BB;&#x30FC;&#x30B8;&#x304B;&#x3089;&#x65E5;&#x4ED8;&#x3092;&#x63A8;&#x5B9A;&#x3059;&#x308B;&#x6642;&#x306B;
&gt;&gt; `yyyy-mm-dd' &#x3068;&#x3044;&#x3046;&#x5F62;&#x5F0F;&#x306E;&#x3082;&#x306E;&#x3082;&#x65E5;&#x4ED8;&#x3068;&#x3057;&#x3066;&#x8A8D;&#x8B58;&#x3059;&#x308B;&#x3088;&#x3046;&#x306B;&#x3057;&#x3066;&#x3044;
&gt;&gt; &#x305F;&#x3060;&#x3051;&#x306A;&#x3044;&#x3067;&#x3057;&#x3087;&#x3046;&#x304B;?
&gt;&gt; 
&gt;&gt; ;; &#x3061;&#x3083;&#x3093;&#x3068;&#x8ABF;&#x3079;&#x305F;&#x308F;&#x3051;&#x3067;&#x306F;&#x306A;&#x3044;&#x306E;&#x3067;&#x3059;&#x304C; man cvs &#x306B;&#x3088;&#x308B;&#x3068; ISO &#x5F62;
&gt;&gt; ;; &#x5F0F;&#x3060;&#x305D;&#x3046;&#x3067;&#x3059;&#x3002;

&#x4E43;&#x6751;&gt; 2. &#x306F;&#x3084;&#x3063;&#x3066;&#x307F;&#x307E;&#x3059;&#x3002; 1. &#x306F;&#x3061;&#x3087;&#x3063;&#x3068;&#x3088;&#x304F;&#x5206;&#x304B;&#x308A;&#x307E;&#x305B;&#x3093;&#x3002;
&#x4E43;&#x6751;&gt; wl &#x3084; cmail &#x306E; semi &#x306A;&#x65B9;&#x3005;&#x306E;&#x30EC;&#x30D3;&#x30E5;&#x30FC;&#x3092;&#x3044;&#x305F;&#x3060;&#x3051;&#x307E;&#x305B;&#x3093;&#x3067;&#x3057;&#x3087;&#x3046;&#x304B;&#x3002;

&#x3059;&#x307F;&#x307E;&#x305B;&#x3093;&#x3001; 2. &#x306E;&#x4EF6;&#x306A;&#x306E;&#x3067;&#x3059;&#x304C;&#x3001;&#x65E5;&#x4ED8;&#x306E;&#x5165;&#x529B;&#x6642;&#x3082;&#x3053;&#x308C;&#x3092;&#x4F7F;&#x3048;&#x308B;&#x3088;&#x3046;&#x306B;
&#x3068;&#x3044;&#x3046;&#x306E;&#x306F;&#x308F;&#x304C;&#x307E;&#x307E;&#x3067;&#x3057;&#x3087;&#x3046;&#x304B;&#x3002; ^^;;;

&#x4E43;&#x6751;&gt; &#x65B0;&#x3057;&#x3044;&#x30D1;&#x30C3;&#x30C1;&#x3092;&#x9001;&#x3063;&#x3066;&#x3044;&#x305F;&#x3060;&#x3051;&#x307E;&#x3059;&#x304B;&#x3002;

&#x4E86;&#x89E3;&#x3057;&#x307E;&#x3057;&#x305F;&#x3002;&#x5F8C;&#x308D;&#x306B;&#x3064;&#x3051;&#x3066;&#x304A;&#x304D;&#x307E;&#x3059;&#x3002;

;; get-orihinal &#x304C; none-nil &#x306E;&#x6642;&#x306E; mhc-mime-import-buffer &#x306E;&#x8FD4;&#x308A;
;; &#x5024;&#x3092;&#x751F;&#x6210;&#x3057;&#x3066;&#x3044;&#x308B;&#x500B;&#x6240;&#x3092;&#x4FEE;&#x6B63;&#x3057;&#x3066;&#x3042;&#x308A;&#x307E;&#x3059;&#x3002;

-- 
&#x9234;&#x6728;&#x572D;&#x4E00; / keiichi@xxxxxxxxx
PGP finger print (DH/DSS)
0B32 B37E 6DE9 3BC1 68A4  4089 7AAF 2B03 ECBD 614B
</pre><pre>Index: mhc-gnus.el
===================================================================
RCS file: /cvsroot/mhc/emacs/mhc-gnus.el,v
retrieving revision 1.12
diff -u -r1.12 mhc-gnus.el
--- mhc-gnus.el	2000/07/28 00:28:06	1.12
+++ mhc-gnus.el	2000/12/13 04:16:34
@@ -15,7 +15,9 @@
 
 ;;; Code:
 
-(eval-when-compile (require 'cl))
+(eval-when-compile
+  (require 'cl)
+  (require 'gnus-art))
 (require 'gnus-sum)
 (require 'nnmhc)
 
@@ -74,6 +76,11 @@
   gnus-original-article-buffer)
 
 
+(defun mhc-gnus-mime-get-mime-structure ()
+  (gnus-summary-select-article)
+  gnus-current-headers)
+
+
 (defsubst mhc-gnus/date-to-group-name (date)
   (mhc-date-format date &quot;%s/%02d/%02d&quot; mhc-base-folder yy mm))
 
@@ -185,6 +192,7 @@
   (put 'mhc-gnus 'draft-reedit-file 'mhc-mime-draft-reedit-file)
   (put 'mhc-gnus 'get-import-buffer 'mhc-mime-get-import-buffer)
   (put 'mhc-gnus 'mime-get-raw-buffer 'mhc-gnus-mime-get-raw-buffer)
+  (put 'mhc-gnus 'mime-get-mime-structure 'mhc-gnus-mime-get-mime-structure)
   (put 'mhc-gnus 'draft-translate 'mhc-mime-draft-translate)
   (put 'mhc-gnus 'eword-decode-string 'mhc-mime-eword-decode-string))
 
Index: mhc-mime.el
===================================================================
RCS file: /cvsroot/mhc/emacs/mhc-mime.el,v
retrieving revision 1.5
diff -u -r1.5 mhc-mime.el
--- mhc-mime.el	2000/08/04 02:19:02	1.5
+++ mhc-mime.el	2000/12/13 04:16:34
@@ -20,12 +20,23 @@
   (funcall (mhc-get-function 'mime-get-raw-buffer)))
 
 
+(defsubst mhc-mime-get-mime-structure ()
+  &quot;Get raw buffer of the current message for `mhc-mime-get-import-buffer'.&quot;
+  (let ((function (mhc-get-function 'mime-get-mime-structure)))
+    (when function
+      (funcall function))))
+
+
 (defvar mhc-mime-import-buffer &quot; *MHC MIME import*&quot;)
 (defun mhc-mime-get-import-buffer (get-original)
-  (let ((raw-buffer (mhc-mime-get-raw-buffer))
-	mime-view-ignored-field-list)
+  (let* ((structure (mhc-mime-get-mime-structure))
+	 (raw-buffer (when (or get-original (not structure))
+		       (mhc-mime-get-raw-buffer)))
+	 mime-view-ignored-field-list)
     (with-current-buffer (get-buffer-create mhc-mime-import-buffer)
-      (mime-view-buffer raw-buffer (current-buffer))
+      (if structure
+	  (mime-display-message structure (current-buffer))
+	(mime-view-buffer raw-buffer (current-buffer)))
       (let (buffer-read-only)
 	(mhc-highlight-message))
       (if get-original
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="01154" href="msg01154.html">[mhc:01155] Re: emacs/mhc-mime.el and...</a></strong>
<ul><li><em>From:</em> Yoshinari Nomura</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="01146" href="msg01146.html">[mhc:01147] emacs/mhc-mime.el and...</a></strong>
<ul><li><em>From:</em> Keiichi Suzuki</li></ul></li>
<li><strong><a name="01149" href="msg01149.html">[mhc:01150] Re: emacs/mhc-mime.el and...</a></strong>
<ul><li><em>From:</em> Yoshinari Nomura</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg01151.html">[mhc:01152] Re: emacs/mhc-mime.el and...</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg01153.html">[mhc:01154] Re: emacs/mhc-mime.el and...</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg01153.html">[mhc:01154] Re: emacs/mhc-mime.el and...</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg01154.html">[mhc:01155] Re: emacs/mhc-mime.el and...</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#01152"><strong>Date</strong></a></li>
<li><a href="threads.html#01152"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
